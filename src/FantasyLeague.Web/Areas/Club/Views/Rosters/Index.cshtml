@{
    @model UserRosterViewModel
    ViewData["Title"] = $"My {ControllerConstants.ClubAreaName}";
    ViewData["ActivePage"] = PagesConstants.Rosters;

    var subs = new List<RosterPlayerViewModel>();

    if (Model.Roster != null)
    {
        subs = Model.Roster.Players.Where(x => !x.Selected).ToList();
    }
    var allFormations = Enum.GetNames(typeof(Formation));
    List<SelectListItem> formationsList = new List<SelectListItem>();
    foreach (var f in allFormations)
    {
        formationsList.Add(new SelectListItem { Value = f, Text = f.Replace(ScoreConstants.Formation, "") });
    }
}

<h1 class="my-2">
    Club: @Model.ClubName
</h1>
<h5>
    Budget Left: @(Model.Roster == null ? GlobalConstants.Budget : Model.Roster.Budget)M
</h5>
@if (Model.TransferWindowStatus == TransferWindowStatus.Opened)
{
    <a asp-controller="@PagesConstants.Rosters" asp-action="@ActionConstants.Create" class="btn btn-primary">
        <span class="oi oi-transfer"></span>
    </a>
}
<hr />
<div class="row">
    <div class="col-md-8 dashboard-item mb-3">
        <partial name="~/Areas/Club/Views/Shared/_RosterPartial.cshtml" model="@Model.Roster" />

        @if (Model.TransferWindowStatus == TransferWindowStatus.Opened)
        {
            <div class="card bundesliga-box-shadow mb-3">
                <h5 class="card-header bundesliga-bg-color text-white">Edit Lineup</h5>
                <div class="card-body p-3">
                    <form class="form-matchday" asp-controller="@PagesConstants.Rosters" asp-action="@ActionConstants.Edit" method="get">
                        <div class="d-flex justify-content-lg-around">
                            <div class="mr-3">Select Formation:</div>
                            <select class="form-control mr-3" asp-for="Roster.Formation" asp-items="formationsList"></select>
                            <div>
                                <button type="submit" class="btn btn-primary">Submit</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        }
    </div>

    <div class="col-md-4 dashboard-item">
        <div class="card bundesliga-box-shadow mb-3">
            <h5 class="card-header bundesliga-bg-color text-white">Substitutions: @subs.Count</h5>
            <div class="card-body p-3">
                <div class="row d-flex justify-content-between">
                    <partial name="~/Areas/Club/Views/Shared/_SubsPartial.cshtml" model="@subs" />
                </div>
            </div>
        </div>
        <div class="card bundesliga-box-shadow mb-3">
            <h5 class="card-header bundesliga-bg-color text-white">Previous rosters</h5>
            <div class="card-body p-3">
                <form class="form-matchday" asp-controller="@PagesConstants.Rosters" asp-action="@ActionConstants.Details">
                    <div class="d-flex justify-content-lg-around">
                        <div class="mr-3">Select Matchday:</div>
                        @Html.DropDownListFor(
                                x => x.MarchdayWeek,
                                new SelectList(Model.RostersWeeks),
                                new { @class = HtmlCssConstants.FormControl + HtmlCssConstants.Mr3 })
                        <div>
                            <button type="submit" class="btn btn-primary">Submit</button>
                        </div>

                    </div>
                </form>
            </div>
        </div>
    </div>
</div>